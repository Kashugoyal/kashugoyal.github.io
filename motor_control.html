<!DOCTYPE HTML>

<html>
  <head>
    <title>
    Kashish Goyal
  </title>
  <link rel="shortcut icon" href="images/icon.png" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" href="assets/css/main.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    <!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
    <!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
  </head>
  <body>

    <!-- Wrapper -->
      <div id="wrapper">

        <!-- Header -->
          <header id="header" class="alt">
            <a href="index.html" class="logo"><strong>Kashish Goyal</strong> <span>Portfolio</span></a>
            <nav>
              <a href="#menu">Menu</a>
            </nav>
          </header>

        <!-- Menu -->
          <nav id="menu">
            <ul class="links">
              <li><a href="index.html">Home</a></li>
              <li><a href="https://linkedin.com/kashish-goyal">LinkedIn</a></li>
              <li><a href="https://github.com/Kashugoyal">Github</a></li>
              <li><a href="https://grabcad.com/kashish-1/projects">GrabCAD</a></li>
              <li><a href="https://kgoyal.wordpress.com">WordPress</a></li>
            </ul>
            <ul class="actions vertical">
              <li><a href="index.html#one" class="button special fit">My Projects</a></li>
              <li><a href="#two" class="button  fit">About Me</a></li>
              <li><a href="#contact" class="button special fit">Contact</a></li>
            </ul>
          </nav>

        <!-- Main -->
          <div id="main" class="alt">

            <!-- One -->
              <section id="one">
                <div class="inner">
                  <header class="major">
                    <h1>Position Control of a Brushed DC Motor</h1>
                  </header>

                  <!-- Content -->
                    <h2 id="content">Mar 2018</h2>
              <p>Controlling the position of a DC motor is the building block for robotics systems.</p>
              <p>
              This project uses a PIC32 microcontroller (on an NU32 board) for the position control and the interface is developed in Matlab as a menu i.e. a list of commands to choose from and send instructions to the PIC32.
            </p>
            <p>The flowchart for the cotrol system is shown below.</p>
            <img src="images/loop.png" width="50%">

              <p><ul>
              <li>The motor is controlled by a PWM signal of frequency 20 KHz. This is generated by Timer3 on the pin OC1. The PWM cycle is governed by the OC1RS register value which is a fraction of the total PWM time period. </li>
                <li>The inner loop controls the current through the motor taking feedback from the current sensor. The current sensor uses nothing but a small resistance (~15 mOhm) to measure voltage drop and then calculate the current in the circuit. The control loop runs at a frequency of 5 KHz which is controlled by the Timer2.</li>
<li>The outer position control lop runs at a frequncy of 200 Hz controlled by the Timer4. The feedback is given by the additional PIC16 (aka decoder) over SPI channel which read the encoder and sends the angle value to the PIC32. The position commands received from Matlab are taken by this loop.</li>
<li> Matlab acts as the trajectory generator and also the scope which displays the final result after the trajectory has been executed.
              </p>
              
              <p>Here is the video for the demo of the project.</p>

<iframe width="720" height="405" src="https://www.youtube.com/embed/BqZI2Hvg3Kw">
</iframe>
<br>
              <p>The code for the project can be seen <a href="https://github.com/Kashugoyal/motor_control">here</a>.</p>
              <p> The following charts depict the plots of desired(blue) vs. obtained(orange) values of current, position(step trajectory) and poistion(cubic trajectory) respectively. The 'x' axis is the time while 'y' axis is the value.<br> Current test: <br>
<img src="https://github.com/Kashugoyal/motor_control/blob/master/images/final.jpg?raw=true" width=40% align="center"/>

<br><br><br>Step Trajectory: <br>
<img src="https://github.com/Kashugoyal/motor_control/blob/master/images/track_step.jpg?raw=true" width=40% align="center"/>

<br><br><br>Cubic Trajetory: <br>
<img src="https://github.com/Kashugoyal/motor_control/blob/master/images/final_cubi.jpg?raw=true" width=40% align="center"/>

</p>
              </p>
              <h2>Skills Involved</h2>
              <ul>
                <li>C Programming</li>
                <li>PIC32 Microcontroller</li>
                <li>Interrupt Sequences</li>
                <li>PID Controller</li>
                <li>Electrical Filters and Amlpifiers</li>
              </ul>


              <a href="index.html#one" class="button special icon fa-angle-double-left"> Projects</a>

<br><br>

<br><br>
<hr>
        <!-- Footer -->
          <footer id="footer">
            <div class="inner">
              <ul class="icons">
                <li><a href="https://github.com/Kashugoyal" class="icon alt fa-github"><span class="label">GitHub</span></a></li>
                <li><a href="https://linkedin.com/in/kashish-goyal" class="icon alt fa-linkedin"><span class="label">LinkedIn</span></a></li>
                <li><a href="https://kgoyal.wordpress.com" class="icon alt fa-wordpress"><span class="label">Wordpress</span></a></li>


              </ul>
              <ul class="copyright">
                <li>&copy; Kashish Goyal, 2018</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
              </ul>
            </div>
          </footer>

      </div>

    <!-- Scripts -->
      <script src="assets/js/jquery.min.js"></script>
      <script src="assets/js/jquery.scrolly.min.js"></script>
      <script src="assets/js/jquery.scrollex.min.js"></script>
      <script src="assets/js/skel.min.js"></script>
      <script src="assets/js/util.js"></script>
      <!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
      <script src="assets/js/main.js"></script>

  </body>
</html>